<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Microservice Dashboard</title>
  <style>
    :root {
      --bg-start: #f5f1e8;
      --bg-end: #dce7f4;
      --card: rgba(255, 255, 255, 0.86);
      --panel: #ffffff;
      --ink: #17212d;
      --muted: #4a5d73;
      --line: rgba(23, 33, 45, 0.12);
      --accent: #0f766e;
      --accent-hover: #115e59;
      --accent-alt: #1d4ed8;
      --error: #b91c1c;
      --success: #15803d;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      color: var(--ink);
      font-family: "Avenir Next", "Segoe UI", "Helvetica Neue", sans-serif;
      background:
        radial-gradient(1200px 700px at 10% 10%, #fff3d0 0%, transparent 45%),
        radial-gradient(900px 600px at 90% 0%, #d6f0ff 0%, transparent 50%),
        linear-gradient(160deg, var(--bg-start), var(--bg-end));
    }

    .shell {
      width: min(960px, 100%);
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 22px;
      box-shadow: 0 18px 45px rgba(23, 33, 45, 0.12);
      backdrop-filter: blur(8px);
      overflow: hidden;
      animation: panel-in 480ms ease-out both;
    }

    .head {
      padding: 28px 28px 18px;
      border-bottom: 1px solid var(--line);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.25));
    }

    .tag {
      margin: 0;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      font-weight: 700;
      font-size: 12px;
      color: var(--accent-alt);
    }

    h1 {
      margin: 10px 0 8px;
      font-size: clamp(26px, 4vw, 36px);
      line-height: 1.1;
    }

    .sub {
      margin: 0;
      color: var(--muted);
      font-size: 15px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 14px;
      padding: 20px;
    }

    .card {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 16px;
      animation: card-in 420ms ease both;
    }

    .card:nth-child(2) {
      animation-delay: 90ms;
    }

    .card:nth-child(3) {
      animation-delay: 180ms;
    }

    .card h2 {
      margin: 0 0 10px;
      font-size: 20px;
    }

    .card p {
      margin: 0 0 10px;
      color: var(--muted);
      font-size: 14px;
    }

    .controls {
      display: flex;
      gap: 8px;
      margin-bottom: 10px;
    }

    input {
      flex: 1;
      min-width: 0;
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      font-size: 14px;
      color: var(--ink);
      background: #fff;
    }

    button {
      border: 0;
      border-radius: 10px;
      padding: 10px 12px;
      font-size: 14px;
      font-weight: 600;
      color: #fff;
      background: var(--accent);
      cursor: pointer;
      transition: transform 140ms ease, background-color 140ms ease;
    }

    button:hover {
      background: var(--accent-hover);
      transform: translateY(-1px);
    }

    .alt {
      background: var(--accent-alt);
    }

    .alt:hover {
      background: #1e40af;
    }

    pre {
      margin: 0;
      padding: 10px;
      border: 1px solid var(--line);
      border-radius: 10px;
      min-height: 96px;
      background: #0f172a;
      color: #dbeafe;
      font-size: 12px;
      line-height: 1.5;
      overflow: auto;
      white-space: pre-wrap;
      word-break: break-word;
    }

    .summary {
      border-radius: 10px;
      border: 1px solid var(--line);
      padding: 12px;
      font-size: 14px;
      font-weight: 600;
      color: var(--muted);
      background: #fff;
    }

    .summary.ok {
      color: var(--success);
      border-color: rgba(21, 128, 61, 0.3);
      background: rgba(22, 163, 74, 0.08);
    }

    .summary.err {
      color: var(--error);
      border-color: rgba(185, 28, 28, 0.3);
      background: rgba(220, 38, 38, 0.08);
    }

    @keyframes panel-in {
      from {
        opacity: 0;
        transform: translateY(16px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes card-in {
      from {
        opacity: 0;
        transform: translateY(12px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>
  <main class="shell">
    <header class="head">
      <p class="tag">go microservice</p>
      <h1>Service dashboard</h1>
      <p class="sub">Quick smoke checks for API endpoints without leaving the browser.</p>
    </header>
    <section class="grid">
      <article class="card">
        <h2>Health check</h2>
        <p><code>GET /healthz</code></p>
        <div class="controls">
          <button id="health-btn">Run</button>
        </div>
        <pre id="health-output">Not checked yet.</pre>
      </article>

      <article class="card">
        <h2>Hello endpoint</h2>
        <p><code>GET /hello?name=...</code></p>
        <div class="controls">
          <input id="name-input" type="text" value="dev" aria-label="Name">
          <button id="hello-btn">Run</button>
        </div>
        <pre id="hello-output">Not checked yet.</pre>
      </article>

      <article class="card">
        <h2>Smoke suite</h2>
        <p>Run both checks and view summary.</p>
        <div class="controls">
          <button id="all-btn" class="alt">Run all</button>
        </div>
        <div id="summary" class="summary">Waiting for checks.</div>
      </article>
    </section>
  </main>

  <script>
    function prettyBody(text) {
      try {
        return JSON.stringify(JSON.parse(text), null, 2);
      } catch (_) {
        return text;
      }
    }

    async function hit(endpoint, outputElement) {
      try {
        const response = await fetch(endpoint, { headers: { Accept: "application/json" } });
        const body = await response.text();
        outputElement.textContent = response.status + " " + response.statusText + "\n" + prettyBody(body);
        return response.ok;
      } catch (err) {
        outputElement.textContent = "Request failed: " + String(err);
        return false;
      }
    }

    const healthOutput = document.getElementById("health-output");
    const helloOutput = document.getElementById("hello-output");
    const summary = document.getElementById("summary");
    const nameInput = document.getElementById("name-input");

    async function runHealth() {
      return hit("/healthz", healthOutput);
    }

    async function runHello() {
      const name = encodeURIComponent(nameInput.value.trim() || "world");
      return hit("/hello?name=" + name, helloOutput);
    }

    async function runAll() {
      summary.className = "summary";
      summary.textContent = "Running checks...";
      const [okHealth, okHello] = await Promise.all([runHealth(), runHello()]);
      if (okHealth && okHello) {
        summary.className = "summary ok";
        summary.textContent = "All checks passed.";
        return;
      }

      summary.className = "summary err";
      summary.textContent = "One or more checks failed.";
    }

    document.getElementById("health-btn").addEventListener("click", runHealth);
    document.getElementById("hello-btn").addEventListener("click", runHello);
    document.getElementById("all-btn").addEventListener("click", runAll);

    runAll();
  </script>
</body>
</html>
